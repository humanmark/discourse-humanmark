#!/usr/bin/env bash
set -e

echo "ğŸ” Running Discourse Humanmark Plugin Linters..."
echo ""
echo "ğŸ’¡ Tip: You can also use 'just lint' for a better experience"
echo ""

# Check if dependencies are installed
if [ ! -d "node_modules" ]; then
  echo "ğŸ“¦ Installing npm dependencies..."
  npm install
fi

if [ ! -d "vendor" ]; then
  echo "ğŸ’ Installing Ruby dependencies..."
  bundle install
fi

# Run JavaScript linting
echo "ğŸ“ Linting JavaScript files..."
npm run lint:js
echo "âœ… JavaScript linting passed"
echo ""

# Run SCSS linting
echo "ğŸ¨ Linting SCSS files..."
npm run lint:scss
echo "âœ… SCSS linting passed"
echo ""

# Run Ruby linting
echo "ğŸ’ Linting Ruby files..."
bundle exec rubocop
echo "âœ… Ruby linting passed"
echo ""

# Run format check
echo "ğŸ“ Checking code formatting..."
npm run format:check
echo "âœ… Code formatting check passed"
echo ""

echo "ğŸ‰ All linting checks passed!"